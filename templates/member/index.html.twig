{% extends 'base.html.twig' %}

{% block title %}Index{% endblock %}

{% block body %}
    {% if app.user.url is defined %}
        <section class="bg-base-light px-4 py-8 antialiased dark:bg-base-dark md:py-16">
            <div class="mx-auto grid max-w-screen-xl rounded-lg p-4  md:p-8 lg:grid-cols-12 lg:gap-8 lg:p-16 xl:gap-16">
                <div class="lg:col-span-4 lg:mt-0 bg-surface-light  dark:bg-surface-dark ">
                    <img src="{{ qr_code_url( app.request.schemeAndHttpHost ~ app.request.baseUrl ~ '/g/' ~ app.user.slug) }}"
                         class="qr" alt="qr code medocs.be/g/{{ app.user.slug }}"/>
                </div>
                <div class="w-full me-auto place-self-start lg:col-span-8">
                    <div class="p-4 bg-surface-light text-content-primary-light dark:bg-surface-dark dark:text-content-primary-dark">
                    <h2 class="mb-3 text-2xl font-bold leading-tight tracking-tight text-content-primary-light dark:text-content-primary-dark md:text-lg">
                        Mon url publique
                    </h2>
                    {{ form_start(url_form, {'attr': {
                        'class': 'w-full flex flex-col mb-6 text-content-primary-light/70 dark:text-content-primary-dark/70',
                        'id': 'emergency'
                    }}) }}
                    <label for="url_url">
                        {{ app.request.schemeAndHttpHost ~ app.request.baseUrl }}/g/
                        {{ form_widget(url_form.url, {
                            'value': app.user.url,
                            'attr': {'class': 'bg-base-light/50 dark:bg-base-dark/20 rounded-lg p-2'}
                        }) }}
                    </label>
                    <div class="mt-4">
                        <twig:button:submit> Modifier </twig:button:submit>
                        <twig:button:secondary> Générer un pseudo </twig:button:secondary>
                    </div>
                    {{ form_end(url_form) }}
                </div>
                <div class="p-2 mt-2 bg-surface-light text-content-primary-light dark:bg-surface-dark dark:text-content-primary-dark">
                    <h2 class="mb-3 text-xl font-bold leading-tight tracking-tight text-content-primary-light dark:text-content-primary-dark md:hidden">
                        Envoyer url publique
                    </h2>

                    {{ form_start(send_form, {'attr': {
                        'class': 'w-full flex flex-col mb-6 text-content-primary-light/70 dark:text-content-primary-dark/70',
                        'id': ''
                    }}) }}


                    <label for="send_email" class="space-y-4">
                        <span>Indiquez une adresse email, la personne recevra un lien vers votre liste publique</span>
                        {{ form_widget(send_form.email, {
                            'attr': {'class': 'w-full bg-base-light/50 dark:bg-base-dark/20 rounded-lg p-2'}
                        }) }}
                    </label>
                    <div class="mt-4">
                        <twig:button:submit> Envoyer </twig:button:submit>
                    </div>
                    {{ form_end(send_form) }}
                </div>
            </div>
            </div>
        </section>



        {% embed "_template-parts/_lines-list.html.twig" %}
            {% block button_action %}
                <a href="{{ path('member_line_new') }}" class="bt bg-info text-info p06 radius-5p margin-horizontal-2 ">
                    Ajouter</a>
            {% endblock %}
        {% endembed %}
    {% endif %}

{% endblock %}

